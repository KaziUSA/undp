{% extends '::frontend.html.twig' %}

{% block body -%}
    {# TODO: Need to add share button with functionality #}
    <div class="page-title"><h3>Community Perception Survey Report - {{ slug }}</h3></div>

    <table class="records_list table table-condensed table-hover table-striped dataTables">

        {# for round 4 #}
        {% if slug == 4 %}
        {% set excludeColumns = {  1:1, 8:8, 10:10, 12:12, 14:14, 15:15, 16:16, 17:17, 18:18, 19:19, 21:21, 22:22, 23:23, 24:24, 26:26, 27:27, 28:28, 29:29, 31:31, 32:32, 33:33, 34:34, 36:36, 37:37, 38:38, 39:39, 41:41, 42:42, 44:44, 45:45
        } %}
        {% endif %}

        {# for round 5 #}
        {% if slug == 5 %}
        {% set excludeColumns = {  1:1, 8:8, 10:10, 12:12, 14:14, 15:15, 16:16, 17:17, 18:18, 19:19, 21:21, 22:22, 23:23, 24:24, 26:26, 27:27, 28:28, 29:29, 31:31, 32:32, 33:33, 34:34, 36:36, 37:37, 38:38, 39:39, 41:41, 44:44, 45:45
        } %}
        {% endif %}

        {# for round 6 #}
        {% if slug == 6 %}
        {% set excludeColumns = {  1:1, 8:8, 10:10, 13:13, 14:14, 15:15, 16:16, 17:17, 18:18, 20:20, 21:21, 22:22, 23:23, 25:25, 26:26, 27:27, 28:28, 30:30, 31:31, 32:32, 33:33, 35:35, 36:36, 37:37, 38:38, 40:40, 41:41, 43:43, 44:44, 45:45, 46:46, 49:49, 50:50, 53:53, 54:54, 55:55, 56:56, 58:58, 59:59, 60:60, 61:61
        } %}
        {% endif %}
        
        {% set count = 1  %}
        
        {% set numColumns = 10 %}
        
        {% for entity in fileInfo %}
            {% if count == 0 %}
                {% set count = 1 %}
            {% elseif count == 1 %}
        
            <thead>
                <tr>
                    {% set columncount = 0 %}
                    {% for val in entity %}
                        {% if columncount in excludeColumns %}
                    
                        {% else %}
                            <th>{{ val }}</a></th>
                        {% endif %}
                        {% set columncount = columncount + 1 %}
                    {% endfor %}
                    
                    
                    
                </tr>
            </thead>
            <tbody>
            {% set count = 2  %}
            
            {% else %}
            
                
            
                <tr>
                    {% set columncount = 0 %}
                    {% for val in entity %}
                        {% if columncount in excludeColumns %}
                    
                        {% else %}
                            <td>{{ val }}</td>
                        {% endif %}
                        {% set columncount = columncount + 1 %}
                    {% endfor %}
                </tr>
            
            {% endif %}
        {% endfor %}    
        </tbody>
    </table>
        
    {% endblock %}
{% block scriptIncludes %}
<script>
        $(document).ready(function() {
            $('.dataTables').dataTable({
                "pageLength": 100,
                responsive: true,
                "dom": 'T<"clear">lfrtip',
                "tableTools": {
                    "sSwfPath": "/js/plugins/dataTables/swf/copy_csv_xls_pdf.swf"
                },
                "colVis": {
                    "buttonText": "Change columns"
                }
            });
            $('.DTTT_button_xls span, .DTTT_button_csv span').html('Download');
        });

        
    </script>
{% endblock %}